{% extends 'base.html' %}
{% block content %}
<div class="text-center mb-4">
  <h1 class="h2 mb-2">Lost & Found Portal</h1>
  <p class="text-muted">Reuniting people with their belongings</p>
  <form method="get" class="row g-3 justify-content-center mt-3">
    <div class="col-md-6">
      <div class="input-group input-group-lg">
        <input type="text" name="q" value="{{ query }}" class="form-control" placeholder="Search items">
        <button class="btn btn-outline-secondary" type="submit">Search</button>
      </div>
    </div>
  </form>
</div>
<div class="text-center mb-3">
  <h3 class="h5 mb-0">Recent Items</h3>
</div>
<div class="row">
{% for item in items %}
  <div class="col-md-3 mb-4">
    <div class="card h-100">
      {% if item.photo %}
      <img src="{{ item.photo.url }}" class="card-img-top" alt="{{ item.title }}" style="height: 180px; object-fit: cover;">
      {% else %}
      <div class="card-img-top d-flex align-items-center justify-content-center bg-light" style="height: 180px;">
        <i class="fas fa-box-open fa-3x text-secondary"></i>
      </div>
      {% endif %}
      <div class="card-body">
        <h6 class="card-subtitle text-muted mb-2">{{ item.item_code }}</h6>
        <h5 class="card-title">{{ item.title }}</h5>
        <div class="mb-2">
          {% if item.item_type == 'LOST' %}
            <span class="badge bg-danger">{{ item.get_item_type_display }}</span>
          {% else %}
            <span class="badge bg-success">{{ item.get_item_type_display }}</span>
          {% endif %}
          <span class="badge bg-info">{{ item.status }}</span>
        </div>
        <p class="small text-muted">{{ item.created_at|date:"M d, Y" }}</p>
        <p class="small">{{ item.description|truncatechars:80 }}</p>
        <a href="/items/{{ item.item_code }}/" class="btn btn-primary btn-sm w-100">View Details</a>
      </div>
    </div>
  </div>
{% empty %}
  <div class="col-12">
    <div class="alert alert-info text-center">
      No items found. Be the first to report!
    </div>
  </div>
{% endfor %}
</div>
{% endblock %}